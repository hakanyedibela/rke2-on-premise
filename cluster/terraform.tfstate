{
  "version": 4,
  "terraform_version": "1.10.5",
  "serial": 25,
  "lineage": "8af4a439-34ce-5480-4e7e-909dfd53dc08",
  "outputs": {
    "cluster_info": {
      "value": {
        "kubeconfig_cmd": "export KUBECONFIG=./kubeconfig.yaml",
        "master_ip": "10.211.55.28",
        "worker_count": 2
      },
      "type": [
        "object",
        {
          "kubeconfig_cmd": "string",
          "master_ip": "string",
          "worker_count": "number"
        }
      ]
    },
    "kubeconfig_path": {
      "value": "./kubeconfig.yaml",
      "type": "string"
    },
    "master_node_ip": {
      "value": "10.211.55.28",
      "type": "string"
    },
    "node_token": {
      "value": "K106b66799b50dbc9525fa372fdc940f608fb592da4caba3ba0e32953568dd03285::server:567490a663829ae24289da373e933107",
      "type": "string",
      "sensitive": true
    },
    "worker_node_ips": {
      "value": [
        "10.211.55.29",
        "10.211.55.30"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string"
        ]
      ]
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "external",
      "name": "get_token",
      "provider": "provider[\"registry.terraform.io/hashicorp/external\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "-",
            "program": [
              "bash",
              "-c",
              "TOKEN=$(ssh -o StrictHostKeyChecking=no -i ~/.ssh/id_rsa hkn@10.211.55.28 'sudo cat /var/lib/rancher/rke2/server/node-token' 2\u003e/dev/null)\nif [ -z \"$TOKEN\" ]; then\n  echo '{\"error\": \"Failed to retrieve token\"}' \u003e\u00262\n  exit 1\nfi\necho \"$TOKEN\" | jq -R '{token: .}'\n"
            ],
            "query": null,
            "result": {
              "token": "K106b66799b50dbc9525fa372fdc940f608fb592da4caba3ba0e32953568dd03285::server:567490a663829ae24289da373e933107"
            },
            "working_dir": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "get_kubeconfig",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "7900050176674127803",
            "triggers": {
              "always_run": "2025-10-25T18:49:38Z"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.external.get_token",
            "null_resource.install_rke2_master",
            "null_resource.install_rke2_worker"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "install_rke2_master",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "index_key": "master1",
          "schema_version": 0,
          "attributes": {
            "id": "7928788085066680889",
            "triggers": {
              "node_ip": "10.211.55.28"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "install_rke2_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "index_key": "worker1",
          "schema_version": 0,
          "attributes": {
            "id": "7346235290718807132",
            "triggers": {
              "master_token": "K106b66799b50dbc9525fa372fdc940f608fb592da4caba3ba0e32953568dd03285::server:567490a663829ae24289da373e933107",
              "node_ip": "10.211.55.29"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.external.get_token",
            "null_resource.install_rke2_master"
          ]
        },
        {
          "index_key": "worker2",
          "schema_version": 0,
          "attributes": {
            "id": "7418810706817596367",
            "triggers": {
              "master_token": "K106b66799b50dbc9525fa372fdc940f608fb592da4caba3ba0e32953568dd03285::server:567490a663829ae24289da373e933107",
              "node_ip": "10.211.55.30"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.external.get_token",
            "null_resource.install_rke2_master"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
